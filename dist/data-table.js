(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{369:function(t,e,a){"use strict";a.r(e);var n=a(691),o=a(523);for(var i in o)"default"!==i&&function(t){a.d(e,t,(function(){return o[t]}))}(i);a(658);var s=a(383),r=a(445),l=a.n(r),u=a(693),d=Object(s.a)(o.default,n.a,n.b,!1,null,null,null);l()(d,{VIcon:u.a}),d.options.__file="src/vue/ld-data-table.vue",e.default=d.exports},446:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=a(504),i=(n=o)&&n.__esModule?n:{default:n};e.default={mixins:[i.default],props:{endpoint:String,graph:String},data:function(){return{loading:0,requests:{},offset:null,loadedOffset:null,rows:[],rowCount:null,pageSize:10,uniqueField:null,sortField:null,sortDirection:"ASC",queryTemplate:"",countQueryTemplate:"",search:"",fields:[]}},computed:{from:function(){return this.graph?"FROM <"+this.graph+">":""},filters:function(){if(!this.search.trim().length||!this.searchFields.trim().length)return"";var t=this.searchFields.split(/[,\s]+/),e=this.search.split(/[\s]+/).filter((function(t){return!t.match(/^\s*$/)})).map((function(e){return"("+t.map((function(t){return(e=e.replace(/["';<>]/,"")).length?"regex(str(?"+t+'), "'+e.replace(/["';<>]/,"")+'", "i")':""})).join(" || ")+")"}));return"FILTER("+e.join(" ) && ( ")+")"},page:function(){return 1+Math.ceil(this.offset/this.pageSize)},pageCount:function(){return Math.ceil(this.rowCount/this.pageSize)},prevOffset:function(){return this.rowCount?Math.max(0,this.offset-this.pageSize):null},nextOffset:function(){if(!this.rowCount)return null;var t=this.offset+this.pageSize;return t>this.rowCount-1&&(t=this.offset),t}},watch:{rows:function(t){t&&this.countRows()},offset:_.debounce((function(t){null!==t&&this.fetchRows()}),500),sortField:function(){this.offset=0,this.fetchRows()},sortDirection:function(){this.offset=0,this.fetchRows()},pageSize:function(){this.offset=0,this.fetchRows()},search:_.debounce((function(t){this.offset=this.rowCount=0,this.fetchRows()}),500)},methods:{renderQueryTemplate:function(t){var e=void 0;do{e=!0;var a=t.match(/(%([^%]+)%)/);if(a){var n=a[1],o=a[2];if(void 0===this[o]||null===this[o]){t=null,console.log("undefined query template placeholder",o);break}e=!1,t=t.replace(n,this[o])}}while(!e);return t},fetchRows:function(){var t=this,e=this.renderQueryTemplate(this.queryTemplate||"");if(!e)return setTimeout(this.fetchRows,500);this.loading++,this.runQuery(e,(function(e){t.fields=e.vars.map((function(t){return{name:t,label:t}})),t.rows=e.rows.filter(t.removeDuplicates),t.loadedOffset=t.offset,setTimeout((function(){return t.loading--}),250)}))},removeDuplicates:function(t,e,a){if(this.uniqueField&&e&&a[e-1][this.uniqueField]&&a[e-1][this.uniqueField].value===a[e][this.uniqueField].value)return!1;return!0},countRows:function(){var t=this,e=this.renderQueryTemplate(this.countQueryTemplate||"");if(!e)return setTimeout(this.countRows,500);this.runQuery(e,(function(e){t.rowCount=e.rows.length?parseInt(e.rows[0].rowCount.value):null}))},runQuery:function(t,e){var a=this;if(this.getCachedQueryResults(t))return e(this.getCachedQueryResults(t));var n=t;this.$http.post(this.endpoint,{query:t},{credentials:!0,emulateJSON:!0,headers:{Accept:"application/sparql-results+json, application/json, */*"},before:function(t){this.requests[n]&&this.requests[n].abort(),this.requests[n]=t}}).then((function(o){delete a.requests[n],a.setCachedQueryResults(t,{vars:o.body.head.vars,rows:o.body.results.bindings}),e(a.getCachedQueryResults(t))}),(function(t){e({vars:[],rows:[]})}))},getFieldLabel:function(t,e){return e["_"+t+"Label"]?e["_"+t+"Label"].value:e[t].value.replace(/^.*[\/#]([^\/#]+)$/,"$1")}}}},447:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{subjectBase:null}},mounted:function(){var t=this.resource||document.querySelector("body").getAttribute("about")||location.href;this.subjectBase=t.replace(/^(.+:\/\/[^\/]+)\/.*$/,"$1")},methods:{onClick:function(t){if(!t.target.hasAttribute("href"))return!0;var e=t.target.getAttribute("href");if(0!==e.indexOf(this.subjectBase))return!0;t.preventDefault(),location.href=e.replace(this.subjectBase+"/","/")}}}},504:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{}},created:function(){this.initQueryCache()},methods:{initQueryCache:function(){this.$store.state.queryCache||this.$store.registerModule("queryCache",{namespaced:!0,state:{cached:{}},mutations:{set:function(t,e){e.subField?t[e.field][e.subField]=e.value:t[e.field]=e.value}}})},getCachedQueryResults:function(t){return this.$store.state.queryCache.cached[t]||null},setCachedQueryResults:function(t,e){this.$store.commit("queryCache/set",{field:"cached",subField:t,value:e})}}}},523:function(t,e,a){"use strict";a.r(e);var n=a(524),o=a.n(n);for(var i in n)"default"!==i&&function(t){a.d(e,t,(function(){return n[t]}))}(i);e.default=o.a},524:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(a(446)),o=i(a(447));function i(t){return t&&t.__esModule?t:{default:t}}e.default={mixins:[n.default,o.default],props:["query","countQuery","resource","searchFields"],data:function(){return{pageSizes:[5,10,20,25,50,100,250]}},watch:{queryTemplate:function(t){t&&this.fetchRows()}},mounted:function(){this.sortFields=this.searchFields||"uri",this.sortField=this.sortFields.split(/[,\s]/).shift(),this.fetchQueryTemplate(),this.fetchCountQueryTemplate()},methods:{fetchQueryTemplate:function(){var t=this;this.$http.get(this.query).then((function(e){t.queryTemplate=e.body}))},fetchCountQueryTemplate:function(){var t=this;this.$http.get(this.countQuery).then((function(e){t.countQueryTemplate=e.body}))},sort:function(t){t.name===this.sortField?this.sortDirection="ASC"===this.sortDirection?"DESC":"ASC":(this.sortField=t.name,this.sortDirection="ASC")}}}},525:function(t,e,a){var n=a(659);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a(131).default)("b9a28c22",n,!1,{})},658:function(t,e,a){"use strict";var n=a(525);a.n(n).a},659:function(t,e,a){(t.exports=a(130)(!1)).push([t.i,'.ld-data-table{transition:opacity 0.5s}.ld-data-table .ld-card{min-height:375px}.ld-data-table.loading td,.ld-data-table.loading .controls{opacity:0.5}.ld-data-table .rows{min-height:300px;overflow:auto}.ld-data-table .rows table{width:100%;max-width:100%;font-size:16px;background-color:#fff;border-collapse:collapse;border-spacing:0;margin:0;position:relative;overflow:auto;display:table}.ld-data-table .rows table thead{vertical-align:middle}.ld-data-table .rows table thead th{vertical-align:bottom;margin:0;text-align:left;padding:0 16px;font-family:"Lato Light","Lucida Sans Unicode","Lucida Grande",sans-serif;color:#666;font-size:16px;line-height:40px;border-bottom:2px solid #4da692;cursor:pointer}.ld-data-table .rows table thead th .sort-arrow{font-size:18px}.ld-data-table .rows table thead th .sort-arrow.desc{transform:rotate(-180deg)}.ld-data-table .rows table thead th.row-index{text-align:right}.ld-data-table .rows table tbody td{text-align:left;padding:8px 16px;border-bottom:1px solid #f5f5f5;background-color:#fff;line-height:20px;vertical-align:top;color:#5e5e5e}.ld-data-table .rows table tbody td.row-index{text-align:right}.ld-data-table .rows table tbody tr:nth-child(even) td{background-color:#f9f9f9}.ld-data-table .loader{border-top:1px solid #f5f5f5;height:3px !important}.ld-data-table .controls{padding:16px}.ld-data-table .controls .search input{width:100%;padding:8px 10px;font-size:14px;line-height:18px;border:1px solid #cbd2da;vertical-align:top;margin-bottom:5px}.ld-data-table .controls .search input:focus{border:1px solid #42796d}.ld-data-table .controls .page-size{line-height:36px;font-size:16px;padding-left:4%;text-align:right}.ld-data-table .controls .page-size select{max-width:75px !important}.ld-data-table .controls .pagination{text-align:right}.ld-data-table .controls .pagination .info{vertical-align:middle;display:inline-block;line-height:36px;font-size:16px;padding:0 16px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ld-data-table .controls .buttons{white-space:nowrap}.ld-data-table .controls .buttons button{display:inline-block;text-align:center;vertical-align:middle;cursor:pointer;height:36px;width:36px;background-color:#4da692;border:none}.ld-data-table .controls .buttons button.disabled{cursor:default;background-color:#f5f5f5}.ld-data-table .controls .buttons button.disabled:hover,.ld-data-table .controls .buttons button.disabled:focus,.ld-data-table .controls .buttons button.disabled::-moz-focus-inner{cursor:default;background-color:#f5f5f5}.ld-data-table .controls .buttons button:hover,.ld-data-table .controls .buttons button:focus,.ld-data-table .controls .buttons button::-moz-focus-inner{background-color:#42796d;outline:0;border:0}.ld-data-table .controls .buttons button .v-icon{height:36px;width:36px;color:#fff;vertical-align:middle}@media (max-width: 599px){.ld-data-table .controls .search,.ld-data-table .controls .page-size,.ld-data-table .controls .pagination{text-align:center}}\n',""])},691:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ld-data-table",class:{loading:t.loading}},[a("ld-card",[a("div",{staticClass:"rows"},[a("table",[a("thead",[a("tr",[a("th",{staticClass:"row-index"},[t._v("#")]),t._v(" "),t._l(t.fields,(function(e){return e.name.match(/^_/)?t._e():a("th",{on:{click:function(a){return t.sort(e)}}},[t._v("\n                            "+t._s(e.label)+"\n                            "),t.sortField===e.name?a("v-icon",{staticClass:"sort-arrow",class:{desc:"DESC"===t.sortDirection}},[t._v("arrow_upward")]):t._e()],1)}))],2)]),t._v(" "),a("tbody",[t.loading||0!==t.rowCount?t._e():a("tr",[a("td",{attrs:{colspan:"100"}},[t._v("0 treffers")])]),t._v(" "),t._l(t.rows,(function(e,n){return a("tr",[a("td",{staticClass:"row-index"},[t._v(t._s(n+t.loadedOffset+1))]),t._v(" "),t._l(t.fields,(function(n){return n.name.match(/^_/)?t._e():a("td",[e[n.name]?"uri"===e[n.name].type?a("a",{attrs:{href:e[n.name].value},on:{click:t.onClick}},[t._v("\n                                "+t._s(t.getFieldLabel(n.name,e))+"\n                            ")]):a("span",[t._v(t._s(e[n.name].value))]):a("span",[t._v("-")])])}))],2)}))],2)])]),t._v(" "),a("div",{staticClass:"loader",class:{loading:t.loading}}),t._v(" "),a("div",{staticClass:"controls"},[a("flex-container",{attrs:{"no-gutter":""}},[a("flex-item",{attrs:{dsk:"25",tab:"50",mob:"100","no-gutter":""}},[a("form",{staticClass:"search",on:{submit:function(t){t.preventDefault()}}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],attrs:{type:"text",placeholder:"Filteren ..."},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}})])]),t._v(" "),a("flex-item",{attrs:{dsk:"25",tab:"50",mob:"100","no-gutter":""}},[a("form",{staticClass:"page-size",on:{submit:function(t){t.preventDefault()}}},[t._v("\n                        Per pagina:\n                        "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.pageSize,expression:"pageSize"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.pageSize=e.target.multiple?a:a[0]}}},[t._l(t.pageSizes,(function(e){return[a("option",{domProps:{value:e}},[t._v(t._s(e))])]}))],2)])]),t._v(" "),a("flex-item",{staticClass:"pagination",attrs:{dsk:"50",tab:"100","no-gutter":""}},[a("span",{staticClass:"info"},[t.pageCount?a("span",{staticClass:"page-info"},[t._v("\n                            Pagina "+t._s(t.page)+"/"+t._s(t.pageCount)+"\n                        ")]):t._e(),t._v(" "),null!==t.rowCount?a("span",{staticClass:"row-count"},[t._v("\n                            ("+t._s(t.rowCount.toLocaleString())+" treffer"+t._s(1!==t.rowCount?"s":"")+")\n                        ")]):t._e()]),t._v(" "),a("span",{staticClass:"buttons"},[null!==t.prevOffset?a("button",{class:{disabled:t.offset===t.prevOffset},attrs:{title:t.prevOffset},on:{click:function(e){t.offset=t.prevOffset}}},[a("v-icon",[t._v("chevron_left")])],1):t._e(),t._v(" "),null!==t.nextOffset?a("button",{class:{disabled:t.offset===t.nextOffset},attrs:{title:t.nextOffset},on:{click:function(e){t.offset=t.nextOffset}}},[a("v-icon",[t._v("chevron_right")])],1):t._e()])])],1)],1)])],1)},o=[];n._withStripped=!0,a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return o}))}}]);